## 对train的分析

| |day|	istrade_cnt | day_cnt | cvr|
| :--: | :--: | :--: | :--: | :--: |
|7|	31|	15349|1195557|0.012838|
|0|	1|	18246|1340697|0.013609|
|1|	2|	17137|1289476|0.013290|
|2|	3|	15309|1236828|0.012378|
|3|	4|	13159|1157641|0.011367|
|4|	5|	11729|1200219|0.009772|
|5|	6|	10635|1934443|0.005498|
|6|	7|	49646|1077175|0.046089|


结论：

- ~~差异过大，用第7天做train和val~~
- ~~用前7天的数据做特征~~
由于7号很多当天零点购买行为，所以不能直接用

猜想：

- 5-6号购买了的用户，7号在浏览相同类目商品时购买几率有可能会大大下降
- 7号前购买了的用户，7号在浏览相同类目商品时购买几率有可能会大大下降
- 6号的数据明显增加，该天浏览的商品在7号购买可能性较大
- 时间差特征依然会有效，可以多做文章
- 反复浏览却没有购买的，在7号购买的概率会比较大

---

# 用户分析

- train-users: (2958505,)
- testA-users: (353263,)
- testB-users: (599457,)

对user_id

testB

- 有46%的用户在train出现过
- 有39%的用户在testA出现过
- 有19.7%的用户在testA和testB中都出现过
- 有26.2%的用户只在train中出现过
- 有34.8%的用户只在testB中出现过(另外训练个模型专门对付这种？)

day7

- day7里面，共有一半的用户只有一条记录
- 上面这部分用户是否都在train里面出现过？--全部都出现过
- 上面这部分用户有多少转化了的？占day7的转化条数多少？--43240转化了的，占day7的87%
- 同样的情况发生在testA、B
-

||usr|usr_cnt==1|占比|
|:-:|:-:|:-:|:-:|
|day7|487664|246495|0.5054|
|testA|353263|249235|0.7055|
|testB|599457|326194|0.5441|

---

# 时间分析

day7
hour
0     176798
1      96070
2      43315
3      25404
4      19158
5      24391
6      55359
7     106500
8     125187
9     135256
10    142795
11    126942

testA
hour
12    35608
13    39852
14    40184
15    39372
16    37254
17    32184
18    32412
19    43623
20    55669
21    61354
22    59170
23    43206

testB
hour
12     83763
13     92250
14     93283
15     91917
16     86354
17     74860
18     76273
19    101604
20    129183
21    142343
22    137428
23    100510

day7CVR
0     0.050114
1     0.045082
2     0.042664
3     0.043222
4     0.045986
5     0.045263
6     0.044401
7     0.046066
8     0.047936
9     0.047244
10    0.044231
11    0.042957

---

# 目前要做的事

- 先按用户抽样，test里面出现的，一定要抽；train里面第七天出现的，看情况抽一部分用户


---

0.18195445593383902, 0.0003004898220941447

[0.18173433688824966, 0.0003188685835011222]
[0.1817043251684643, 0.0003164581390870183] ctf
[0.17676767236212126, 0.0003353192754935252]

---

# 时间特征

- 若无，记为-1

1. usr_draw 用户浏览了多少个商品、店铺、context_id
2. usr_td 用户此次点击距离上一次点击的时间差；用户此次点击距离下一次点击的时间差
3. usr_1st_last_td 用户此次点击距离第一条数据的时间差；用户此次点击距离最后一条数据的时间差
4. nb feature
5. usr_istd_td 用户距离上一条已转化的数据的时间差；用户距离下一条已转化的数据的时间差
6. usr_feat_1st_last_td 当前usr对feat的点击与usr对feat首次点击的时间差；同...最后一次点击的时间差
7. usr_feat_td 当前usr对feat的点击与上一次usr对feat点击的时间差；当前usr对feat的点击与下一次usr对feat点击的时间差
